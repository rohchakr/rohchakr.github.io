{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/tech/linux/bashrc-vs-bashprofile/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"linux-startup-settings-bashrc-and-bash_profile\" style=\"position:relative;\"><a href=\"#linux-startup-settings-bashrc-and-bash_profile\" aria-label=\"linux startup settings bashrc and bash_profile permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Linux Startup Settings (.bashrc and .bash_profile)</h1>\n<p>What are the differences between .bashrc and .bash_profile? Why are they required? Where should they be present? What to do in case they are absent in user's home directory? Where are environment variables and path declared in linux? If you are haunted by any of these questions and want to get a solid grasp in no time, you are at the perfect place.</p>\n<p>Although you should fully understand this just by reading along, still it is highly recommended to execute the below commands in your own terminal running bash. The commands and concepts presented here are not specific to any particular linux diastro, but are valid in general.</p>\n<blockquote>\n<p>The whole essence of working with Linux is to explore yourself without blindly trusting anyone, not even me! Before executing any command presented in this article, feel free to explore their <code>man</code> pages to know their usages and impacts.</p>\n</blockquote>\n<h2 id=\"high-level-understanding\" style=\"position:relative;\"><a href=\"#high-level-understanding\" aria-label=\"high level understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>High Level Understanding</h2>\n<p><strong>NOTE:</strong> Don't get intimidated if you come across any new/unknown terms in this section. We will go through everything step-by-step while coding in the next section.</p>\n<p>Every contents in the file:</p>\n<ul>\n<li><code>.bashrc</code> are executed when a non-login shell is opened for a user already having an active login session</li>\n<li><code>.bash_profile</code> are executed when a login shell is opened or a new login session is created for a user</li>\n</ul>\n<p>There are few things to understand. First, both of these files are specific to a user and are present in the user's home directory. For system wide settings, there are separate files which are beyond the scope of the current discussion and may be platform (diastro) dependent. Next, a non-login shell is obtained whenever you open a new terminal, perform local or remote login to an existing GUI session or switch the current user using <code>su</code> command without <code>-</code>, <code>-l</code> or <code>--login</code> options. A login shell is obtained whenever you run <code>su</code> command with the above options or start a new remote login session using <code>ssh</code> command. For more details, please refer to the man pages of <code>su</code> and <code>ssh</code>.</p>\n<p>If it is too much for you to digest switch-user and remote logging, a simple takeaway can be to remember that .bash_profile is executed only once when you login for the first time and .bashrc is executed everytime you open a new terminal.</p>\n<p>Now, presence of these two files are not absolute necessary. But having them will save us lot's of efforts and help keeping things organized. For example, let's consider you need to have the environment variable JAVA_HOME declared before running a script in terminal. You can always explicitly declare the variable. But having declared that as part of .bashrc will save the effort of declaring it explicitly for new terminals. Moreover, we often need to have multiple environment variables declared for most of the softwares.</p>\n<p>Alright! It's now time to get your hands dirty and let the fun begin! Close all other processes running (or wait for them to finish). Open your terminal and switch to the root user. If you need help in switching to root user, check my article <code>Linux: Switch to root user</code>.</p>\n<h2 id=\"get-a-user-to-experiment-with\" style=\"position:relative;\"><a href=\"#get-a-user-to-experiment-with\" aria-label=\"get a user to experiment with permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Get a user to experiment with</h2>\n<p>Not to get messed up with any of the existing user's settings, let's create a new user. Before that, let's verify if we have the bash shell available.</p>\n<pre><code class=\"language-shell\">cat /etc/shells\n</code></pre>\n<p>If any of your output ends with bash (in my case, it is /bin/bash), then you are good to go and use that value as login shell in the next command.</p>\n<p><strong>NOTE:</strong> In this article, we are using username as user1 and it's home directory as /home/user1. You are free to choose your own. But, beware to use your own username and home directory in all the places ahead. If you are a newbie, it is better to copy paste and execute the commands from here.</p>\n<p>The following <code>useradd</code> command creates a new user with the name <em>user1</em> having home directory at <em>/home/user1</em> and with login shell <em>/bin/bash</em>. To verify the user is successfully created, run <code>getent</code> command as below.</p>\n<pre><code class=\"language-shell\">useradd -d /home/user1 -s /bin/bash -m user1 \ngetent passwd user1\n</code></pre>\n<p>You should get output similar to</p>\n<pre><code class=\"language-shell\">user1:x:10007:10007::/home/user1:/bin/bash\n</code></pre>\n<p>If you get any permission related errors for <code>useradd</code> command, probably you are not logged in as the root user. To know more about creating users in linux and understanding all the values in the above output, check my article <code>Linux Users and Groups</code>.</p>\n<p>To set password for this user, run</p>\n<pre><code class=\"language-shell\">passwd user1\n</code></pre>\n<p>It should ask for entering a new password. Don't worry if you can't see the password you are typing on the screen. Just type your password for user1 and press 'Enter'.</p>\n<p>Now that we have the password set, we can switch to that user. Execute</p>\n<pre><code class=\"language-shell\">su - user1\n</code></pre>\n<p>Verify if we are logged in with the desired user and are in it's home directory</p>\n<pre><code class=\"language-shell\">echo $USER\necho $HOME\npwd\n</code></pre>\n<p>If the output of <code>echo $HOME</code> and <code>pwd</code> are same, then you are at the right place.</p>\n<h2 id=\"edit-bashrc-and-bash_profile\" style=\"position:relative;\"><a href=\"#edit-bashrc-and-bash_profile\" aria-label=\"edit bashrc and bash_profile permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Edit .bashrc and .bash_profile</h2>\n<p>Let's append a print statement and a variable declaration at the end of .bashrc and .bash_profile using a text editor. If you don't have these files already created, you can explicitly create them here and have the last two lines from the below snippets inserted. Below are the contents of .bashrc and .bash_profile from my environment. Don't bother if yours look different. Just make sure the last two lines exist.</p>\n<pre><code class=\"language-shell\"># .bashrc\n\n# User specific aliases and functions\n\n# Source global definitions\nif [ -f /etc/bashrc ]; then\n\t. /etc/bashrc\nfi\n\necho '.bashrc getting called'\nmy_bashrc_var='My .bashrc variable'\n</code></pre>\n<pre><code class=\"language-shell\"># .bash_profile\n\n# Get the aliases and functions\nif [ -f ~/.bashrc ]; then\n\t. ~/.bashrc\nfi\n\n# User specific environment and startup programs\n\nPATH=$PATH:$HOME/bin:/sbin:/usr/sbin\nBASH_ENV=$HOME/.bashrc\nexport BASH_ENV PATH\nunset USERNAME\n\necho '.bash_profile getting called'\nmy_bash_profile_var='My .bash_profile variable'\n</code></pre>\n<p>If you are more interested to know how to be more productive with .bashrc, check out my article <code>Linux: My .bashrc Content</code>. For now, let's move on.</p>\n<p>To test if you have done your edits properly, let's call both the files explicitly</p>\n<pre><code class=\"language-shell\">source .bashrc\nsource .bash_profile\n</code></pre>\n<p>If you don't get any errors and have the echo statements printed, Congrats! You are all setup for the experiment to begin.</p>\n<h2 id=\"see-everything-in-action\" style=\"position:relative;\"><a href=\"#see-everything-in-action\" aria-label=\"see everything in action permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>See everything in action</h2>\n<p>If you have a GUI setup, follow these steps:</p>\n<ol>\n<li>\n<p>Logout of the current user.</p>\n</li>\n<li>\n<p>Login with user1</p>\n</li>\n<li>\n<p>Open a terminal</p>\n</li>\n</ol>\n<p>You should see the echo statement that was put in the file <code>.bashrc</code>. To verify the persistence of variable declaration, run <code>echo $my_bashrc_var</code>. Amazing! Now you have seen it yourself that <code>.bashrc</code> is getting called whenever you open a new terminal. If you are wondering about seeing the echo statements in <code>.bash_profile</code>, I'm sorry! Those were executed in backgroud when you were logging in. It is not impossible to find out the logs, but those are platform(diastro) dependent and beyond the current scope. But hold on, we will definitely look at them using <code>su -</code> command.</p>\n<p>For the next steps, you can again switch back to your default user (other than user1) - logout and login through GUI or use <code>su</code> command.</p>\n<ol>\n<li>\n<p>Open a terminal</p>\n</li>\n<li>\n<p>Execute any one of the below three commands (all are equivalent; for more info, see options in <code>man su</code>)</p>\n</li>\n</ol>\n<pre><code class=\"language-shell\">sudo - user1\n</code></pre>\n<pre><code class=\"language-shell\">sudo -l user1\n</code></pre>\n<pre><code class=\"language-shell\">sudo --login user1\n</code></pre>\n<p>Did you see the echo statement in <code>.bash_profile</code> getting printed? You can execute <code>echo $my_bash_profile_var</code> to see if the variable is defined. That's it!</p>\n<p><strong>NOTE:</strong> In some environments, you might be able to see both the echo statements of <code>.bashrc</code> and <code>.bash_profile</code>. The reason behind this is that <code>.bash_profile</code> is set to internally call <code>.bashrc</code>. If you see the contents of the <code>.bash_profile</code> posted above, this is exactly what is happening.</p>\n<p>If you have made it up to here, you deserve <strong>👏</strong>. Now, exit from the session of user1 and relogin using <code>su</code> command, this time without any option</p>\n<pre><code class=\"language-shell\">exit\nsu user1\n</code></pre>\n<p>You should be able to see the echo statement in <code>.bashrc</code>. Execute <code>echo $my_bashrc_var</code> and <code>echo $my_bash_profile_var</code>. I hope it should be clear by now when the two files get executed and what are the significances.</p>\n<h2 id=\"clean-up\" style=\"position:relative;\"><a href=\"#clean-up\" aria-label=\"clean up permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Clean Up</h2>\n<p>After all the dirty mess, let's make everything clean as before! To delete the user user1, switch to root user and execute</p>\n<pre><code class=\"language-shell\">userdel -rf user1\n</code></pre>\n<blockquote>\n<p>Protip: It is always a good practice to call .bashrc in your .bash_profile to ensure all the settings for non-login shells are applied to login shells as well. Otherwise, you can explicitly call <code>source .bashrc</code> whenever you enter a login-shell.</p>\n</blockquote>\n<blockquote>\n<p>Protip: In general, always use .bashrc to declare your environment variables and aliases.</p>\n</blockquote>","frontmatter":{"date":"September 19, 2020","title":"Bashrc vs Bashprofile"}}},"pageContext":{"slug":"/blog/tech/linux/bashrc-vs-bashprofile/"}},"staticQueryHashes":["1865044719","3649515864"],"slicesMap":{}}