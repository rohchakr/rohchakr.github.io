{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/tech/java/java-commandline/","result":{"data":{"markdownRemark":{"html":"<p>This article provides an all-in-one reference to compile, pack and run java source files with external dependencies from the command line.</p>\n<h2>Environment Details</h2>\n<ol>\n<li>Operating System: Oracle Linux 7.8</li>\n<li>Shell: bash</li>\n<li>Terminal Emulator: gnome-shell</li>\n<li>Text Editor: vim</li>\n<li>Java: jdk1.8.0_181-amd64</li>\n<li>External dependencies: jackson-core.jar, jackson-annotations.jar, jackson-databind.jar</li>\n</ol>\n<h2>Getting Started</h2>\n<pre><code class=\"language-shell\"># Create and navigate to a new empty directory\nmkdir java-cmdline\ncd java-cmdline\n\n# Create java source files\ntouch MyEnv.java Main.java\n</code></pre>\n<h2>Source Code</h2>\n<blockquote>\n<p>The file name and public class name must be the same</p>\n</blockquote>\n<pre><code class=\"language-java\">/**\n * A simple JavaBean for my env setup\n * @author\trohchakr\n */\npublic class MyEnv {\n\tprivate String textEditor;\n\tprivate String terminalEmulator;\n\n\tpublic String getTextEditor() {\n\t\treturn textEditor;\n\t}\n\n\tpublic String getTerminalEmulator() {\n\t\treturn terminalEmulator;\n\t}\n}\n</code></pre>\n<pre><code class=\"language-java\">import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.core.JsonProcessingException;\n\n/**\n * Main class\n * @author\trohchakr\n */\npublic class Main {\n\tpublic static void main(String[] args) {\n\t\tObjectMapper objectMapper = new ObjectMapper();\n\n\t\t// For default-deserializer, json keys have to match with the class instance variables\n\t\tString myEnvJson = \"{\\\"textEditor\\\":\\\"vim\\\", \\\"terminalEmulator\\\":\\\"gnome-terminal\\\"}\";\n\n\t\ttry {\n\t\t\tMyEnv myEnv = objectMapper.readValue(myEnvJson, MyEnv.class);\n\t\t\tSystem.out.println(\"Text Editor: \" + myEnv.getTextEditor());\n\t\t\tSystem.out.println(\"Terminal Emulator: \" + myEnv.getTerminalEmulator());\n\t\t} catch (JsonProcessingException e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n}\n</code></pre>\n<h2>Compile</h2>\n<pre><code class=\"language-shell\"># Create a new directory for class files\nmkdir classes\n\n# JDK installation directory\nJAVA_HOME=\"/usr/java/jdk1.8.0_181-amd64\"\n\n# 3rd party libraries directory containing the three jackson jar files\nJACKSON_DIR=\"/home/rohchakr/jackson\"\n\n# Compile MyEnv.java and generate MyEnv.class in classes directory\n$JAVA_HOME/bin/javac -d classes MyEnv.java\n\n# Compile Main.java with dependencies (jackson and MyEnv) and generate Main.class in classes directory\n$JAVA_HOME/bin/javac -cp $JACKSON_DIR/*:classes -d classes Main.java\n</code></pre>\n<h2>Run Class File</h2>\n<blockquote>\n<p>Skip this if we are going to generate JAR file and run that instead</p>\n</blockquote>\n<pre><code class=\"language-shell\"># Navigate to classes directory\ncd classes\n\n# Run the main class file\n$JAVA_HOME/bin/java -cp $JACKSON_DIR/*:. Main\n\n# Come out of the classes directory\ncd -\n</code></pre>\n<h2>Pack Classes in JAR and Run JAR File</h2>\n<h3>Approach 1 (Provide Classpath and Main Class while Running JAR)</h3>\n<pre><code class=\"language-shell\"># Generate MyJar.jar in the current directory using all files from classes directory\n$JAVA_HOME/bin/jar cf MyJar.jar -C classes .\n\n# Clean up classes directory\nrm -rf classes\n\n# Run JAR file\n$JAVA_HOME/bin/java -cp $JACKSON_DIR/*:MyJar.jar Main\n</code></pre>\n<h3>Approach 2 (Provide Classpath and Main Class Using Custom Manifest File)</h3>\n<pre><code class=\"language-shell\"># Create a custom manifest file with main class and class path\nmkdir META-INF\necho 'Main-Class: Main' > META-INF/MANIFEST.MF\necho \"Class-Path: $JACKSON_DIR/jackson-core.jar $JACKSON_DIR/jackson-annotations.jar $JACKSON_DIR/jackson-databind.jar\" >> META-INF/MANIFEST.MF\n\n# Generate MyJar.jar in the current directory using custom manifest and all files from classes directory\n$JAVA_HOME/bin/jar cmf META-INF/MANIFEST.MF MyJar.jar -C classes .\n\n# Clean up classes and META-INF directory\nrm -rf classes META-INF\n\n# Run JAR file\n$JAVA_HOME/bin/java -jar MyJar.jar\n</code></pre>\n<h2>Cleanup</h2>\n<pre><code class=\"language-bash\"># Remove the directory\ncd ..\nrm -rf java-cmdline\n</code></pre>","frontmatter":{"date":"December 23, 2020","title":"Run Java from CommandLine"}}},"pageContext":{"slug":"/blog/tech/java/java-commandline/"}},"staticQueryHashes":["1865044719","3649515864"],"slicesMap":{}}